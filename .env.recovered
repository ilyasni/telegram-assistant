# ============================================================================
# CORE: окружение, логи
ENVIRONMENT=production
LOG_LEVEL=INFO
DEBUG=false

# ============================================================================
# TELEGRAM: сервисный аккаунт для публичных каналов + бот
MASTER_API_ID=
MASTER_API_HASH=
TELEGRAM_BOT_TOKEN=
TELEGRAM_API_ID=
TELEGRAM_API_HASH=

# ============================================================================
# SUPABASE / POSTGRES (локально в Docker!)
POSTGRES_DB=postgres
POSTGRES_PASSWORD=postgres
# ВАЖНО: контейнерное имя базы — supabase-db, не localhost
DATABASE_URL=postgresql://postgres:${POSTGRES_PASSWORD}@supabase-db:5432/${POSTGRES_DB}
DATABASE_URL_LOCAL=postgresql://postgres:${POSTGRES_PASSWORD}@localhost:5432/${POSTGRES_DB}

# Ключи Supabase (для Studio/Kong и совместимости)
ANON_KEY=
SERVICE_KEY=

# JWT (единый секрет для GoTrue/PostgREST/сервисов)
JWT_SECRET=
JWT_ALGORITHM=HS256

# ============================================================================
# REDIS / QDRANT / NEO4J (контейнерные адреса)
REDIS_URL=redis://redis:6379
QDRANT_URL=http://qdrant:6333

NEO4J_URL=bolt://neo4j:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=

# ============================================================================
# AI PROVIDERS
# Базовый провайдер — GigaChat (через gpt2giga-proxy/OpenAI-совместимый)
GIGACHAT_API_KEY=
# Опциональный фолбэк
OPENROUTER_API_KEY=

# Модели/эмбеддинги (держим совместимость)
EMBEDDING_MODEL=hash-based
EMBEDDING_DIMENSION=128

# ============================================================================
# ENRICHMENT / ПОЛИТИКИ
ENRICHMENT_CONFIG_PATH=worker/config/enrichment_policy.yml

# ============================================================================
# MULTI-TENANCY (дефолт)
TENANT_ID=default-tenant

# ============================================================================
# DOMAINS (если есть Caddy/ingress)
DOMAIN=produman.studio
SUPABASE_HOST=supabase.produman.studio

# ============================================================================
# GRAFANA (локально)
GF_SECURITY_ADMIN_PASSWORD=admin

# ============================================================================
# CORS / SECURITY / RATELIMIT
CORS_ORIGINS=http://localhost:3000,https://your-domain.com
RATE_LIMIT_PER_MINUTE=100

# ============================================================================
# PERFORMANCE (НЕ скейлим через deploy.replicas!)
WORKER_REPLICAS=1
WORKER_BATCH_SIZE=10
WORKER_TIMEOUT=30
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
REDIS_POOL_SIZE=10
