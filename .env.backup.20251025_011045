# ============================================================================
# CORE: окружение, логи
ENVIRONMENT=production
LOG_LEVEL=INFO
DEBUG=false

# ============================================================================
# TELEGRAM: сервисный аккаунт для публичных каналов + бот
MASTER_API_ID=9602513
MASTER_API_HASH=d72f161ad90794db968e19cc24e77efa
TELEGRAM_BOT_TOKEN=7914772496:AAHpXmBltWg1XztwwyCXSs5mc7kvvkTdwPw

# ============================================================================
# SUPABASE / POSTGRES (локально в Docker!)
POSTGRES_DB=postgres
POSTGRES_PASSWORD=postgres
# ВАЖНО: контейнерное имя базы — supabase-db, не localhost
DATABASE_URL=postgresql+asyncpg://telegram_user:w2AUcQz5g89mCac9plX0FQfZSNWdvcxg@localhost:5432/telegram_assistant
DATABASE_URL_LOCAL=postgresql://postgres:${POSTGRES_PASSWORD}@localhost:5432/${POSTGRES_DB}

# Ключи Supabase (для Studio/Kong и совместимости)
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlIiwiaWF0IjoxNzYxMjk3NzM2LCJleHAiOjIwNzY2NTc3MzYsInN1YiI6InN0dWRpbyJ9.gnvwiHReE1J79SIknHSUMdVMkETyqD6pR7uEja4Z1Tk
SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoic2VydmljZV9yb2xlIiwiaXNzIjoic3VwYWJhc2UiLCJpYXQiOjE3NjEyOTc3MzYsImV4cCI6MjA3NjY1NzczNiwic3ViIjoic3R1ZGlvIn0.eW3S4Ld1nYq6z6y76YuQ-2Bg1I_-sHl_4CabObYrYQQ

# JWT (единый секрет для GoTrue/PostgREST/сервисов)
JWT_ALGORITHM=HS256

# ============================================================================
# REDIS / QDRANT / NEO4J (контейнерные адреса)
REDIS_URL=redis://redis:6379
QDRANT_URL=http://qdrant:6333

NEO4J_URL=bolt://neo4j:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=neo4j123

# ============================================================================
# AI PROVIDERS
# Базовый провайдер — GigaChat (через gpt2giga-proxy/OpenAI-совместимый)
GIGACHAT_CREDENTIALS=N2MwNTA0NGMtZTM4Yy00YjRhLTliZjEtYTI5YzVmMWE4ZWMyOmRmM2Q3MWY1LTI2ZDItNDA2MS04NzVjLTIyYzNkM2YwMWRjMg==
# Опциональный фолбэк
OPENROUTER_API_KEY=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
OPENROUTER_MODEL=qwen/qwen-2.5-72b-instruct:free

# Модели/эмбеддинги (держим совместимость)
EMBEDDING_MODEL=hash-based
EMBEDDING_DIMENSION=128

# ============================================================================
# ENRICHMENT / ПОЛИТИКИ
ENRICHMENT_CONFIG_PATH=worker/config/enrichment_policy.yml

# ============================================================================
# MULTI-TENANCY (дефолт)
TENANT_ID=default-tenant

# ============================================================================
# DOMAINS (если есть Caddy/ingress)
DOMAIN=produman.studio
SUPABASE_HOST=supabase.produman.studio

# ============================================================================
# GRAFANA (локально)
GF_SECURITY_ADMIN_PASSWORD=admin

# ============================================================================
# CORS / SECURITY / RATELIMIT
CORS_ORIGINS=http://localhost:3000,https://your-domain.com
RATE_LIMIT_PER_MINUTE=100

# ============================================================================
# PERFORMANCE (НЕ скейлим через deploy.replicas!)
WORKER_REPLICAS=1
WORKER_BATCH_SIZE=10
WORKER_TIMEOUT=30
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
REDIS_POOL_SIZE=10

ENCRYPTION_KEY=2/RiNo0IHF35BY2wAkd4m2KfgMVGQ0luD4ovxBU8ORI=
DEFAULT_TENANT_ID=default-tenant
BOT_WEBHOOK_SECRET=1b409742e0e3e1709519ea7e04c4e70f
BOT_PUBLIC_URL=https://produman.studio
JWT_SECRET=a1ee9c1531d7f28ab1fe891e50aa9a6cae5612b9dbf053989e8347e47c912152
NEO4J_AUTH=neo4j/B516GDcdaZpJ3c21YCPW6RNdbT5OBX99
GRAFANA_PASSWORD=x4tjU9BjKTBXiPof

# Supabase Auth Keys (Context7 best practices)
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InByb2R1bWFuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzI0MzI0MDAsImV4cCI6MjA0ODAwODQwMH0.Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8
SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InByb2R1bWFuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczMjQzMjQwMCwiZXhwIjoyMDQ4MDA4NDAwfQ.ServiceServiceServiceServiceServiceServiceServiceServiceServiceService
SUPABASE_URL=http://localhost:8000
SUPABASE_ANON_KEY=${ANON_KEY}
SUPABASE_SERVICE_KEY=${SERVICE_KEY}


# Truth Detector Feature Flags
AUTH_FINALIZE_DB_BYPASS=on
AUTH_DETAILED_DIAGNOSTICS=on
AUTH_RETRY_OPERATIONAL_ERRORS=on
AUTH_SOFT_DEGRADATION=on
AUTH_LOG_SQL_STATEMENTS=on
