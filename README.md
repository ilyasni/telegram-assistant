# Telegram Channel Parser Bot

## –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞: –ü–µ—Ä–µ—Ö–æ–¥–Ω–∞—è —Ñ–∞–∑–∞

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –æ—Ç —Å—Ç–∞—Ä–æ–π –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∫ –Ω–æ–≤–æ–π event-driven –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.

### üèóÔ∏è –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- **–°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è**: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤ `docs/OLD_*` —Ñ–∞–π–ª–∞—Ö
  - –ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å n8n/Flowise
  - –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/ilyasni/t-bot-for-channels/tree/test-cleanup-fresh
- **–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –û–ø–∏—Å–∞–Ω–∞ –≤ `docs/ARCHITECTURE_PRINCIPLES.md`
  - Event-driven –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã —Å LangChain
  - –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: –í –ø—Ä–æ—Ü–µ—Å—Å–µ (–ø–∞–ø–∫–∏ `api/`, `worker/`, `telethon-ingest/` –ø—É—Å—Ç—ã–µ)

### üéØ –ú–∏—Å—Å–∏—è

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∫–æ-–ø–∏–ª–æ—Ç –¥–ª—è Telegram Channel Parser Bot ‚Äî –ø–æ–º–æ—â—å –≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏, —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
- **Event-driven** ‚Äî –æ–±–º–µ–Ω —á–µ—Ä–µ–∑ Kafka/Redpanda –∏–ª–∏ Redis Streams
- **Stateless** ‚Äî –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–µ –≤–æ—Ä–∫–µ—Ä—ã
- **LLM-first** ‚Äî GigaChat —á–µ—Ä–µ–∑ `gigachain` –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- **–ú—É–ª—å—Ç–∏-—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å** ‚Äî –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ tenant_id

### –°–µ—Ä–≤–∏—Å–Ω–∞—è —Ç–æ–ø–æ–ª–æ–≥–∏—è
- **Telegram Ingestion Service** ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –∫–∞–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ Telethon
- **LangChain Orchestrator** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –∏ –∑–∞–ø—É—Å–∫ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤
- **FastAPI Gateway** ‚Äî REST/WebSocket API
- **Graph Intelligence Service** ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Neo4j
- **Worker Service** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **Python 3.11+**, FastAPI, SQLAlchemy 2.x
- **LangChain**, `gigachain` (GigaChat), Pydantic v2
- **Celery/FastStream** –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

### –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **Postgres** (Supabase) ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- **Redis/Valkey** ‚Äî –∫—ç—à, —Å–µ—Å—Å–∏–∏, –æ—á–µ—Ä–µ–¥–∏
- **Qdrant** ‚Äî –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- **Neo4j** ‚Äî –≥—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π
- **Cloud.ru S3** ‚Äî —Ñ–∞–π–ª—ã –∏ –º–µ–¥–∏–∞

### Messaging
- **Kafka/Redpanda** ‚Äî event bus
- **Schema Registry** ‚Äî –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å–æ–±—ã—Ç–∏–π

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd telegram-assistant

# –ó–∞–ø—É—Å–∫ –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
docker-compose up -d postgres redis qdrant neo4j

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ (–∫–æ–≥–¥–∞ –±—É–¥—É—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)
docker-compose up -d api worker telethon-ingest
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose ps

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker-compose logs api worker telethon-ingest

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:8000/api/v2/health
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã**: `docs/ARCHITECTURE_PRINCIPLES.md`
- **–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏**: `docs/MIGRATION_GUIDE.md`
- **–ü—Ä–∞–≤–∏–ª–∞ Cursor**: `.cursor/rules/`

### –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏)
- **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è**: `docs/OLD_SYSTEM_SPECIFICATION.md`
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: `docs/OLD_CURRENT_STATE_DIAGNOSTICS.md`
- **–ü–∞–π–ø–ª–∞–π–Ω—ã**: `docs/OLD_SYSTEM_PIPELINE.md`

## Roadmap

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —è–¥—Ä–∞** ‚Äî Telethon + FastAPI + Postgres + Redis
2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ orchestrator** ‚Äî Redpanda/Redis Streams + LangChain
3. **RAG –º–æ–¥—É–ª—å** ‚Äî Qdrant + LangChain retrieval pipeline
4. **Graph Intelligence** ‚Äî Neo4j + GraphRAG
5. **Quality Evaluation** ‚Äî Ragas evaluator
6. **Observability & Security** ‚Äî OTel + RBAC + –∞—É–¥–∏—Ç

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ü—Ä–∞–≤–∏–ª–∞ Cursor
–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥—É–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ Cursor –≤ `.cursor/rules/`:
- `00-principles.mdc` ‚Äî –º–∏—Å—Å–∏—è, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- `01-project-context.mdc` ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞, —Å—É—â–Ω–æ—Å—Ç–∏, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- `02-services.mdc` ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤, —Ñ–æ—Ä–º–∞—Ç PR, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `03-database.mdc` ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –ë–î, —à–∞–±–ª–æ–Ω—ã —Ç–∞–±–ª–∏—Ü, –º–∏–≥—Ä–∞—Ü–∏–∏
- `04-rag-graph.mdc` ‚Äî RAG, GraphRAG, Qdrant, Neo4j
- `05-auth-security.mdc` ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, RBAC
- `06-evaluation-llmops.mdc` ‚Äî –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞, A/B —Ç–µ—Å—Ç—ã, –º–µ—Ç—Ä–∏–∫–∏
- `07-devops-observability.mdc` ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, health checks, Grafana
- `99-troubleshooting.mdc` ‚Äî –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, —á–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, —Ñ–∏–∫—Å—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤
- **Context** ‚Äî –∫—Ä–∞—Ç–∫–æ (< 5 —Å—Ç—Ä–æ–∫) –æ —Ñ–∞–π–ª–µ, —Å–µ—Ä–≤–∏—Å–µ –∏–ª–∏ –∑–∞–¥–∞—á–µ
- **Plan** ‚Äî –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **Patch** ‚Äî –¥–∏—Ñ—Ñ –∏–ª–∏ –ø–æ–ª–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
- **Checks** ‚Äî –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∫–æ–º–∞–Ω–¥—ã, —Å—Ü–µ–Ω–∞—Ä–∏–π, —Ç–µ—Å—Ç—ã, –ª–æ–≥–∏)
- **Impact / Rollback** ‚Äî —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞—Ç—Ä–æ–Ω—É—Ç–æ –∏ –∫–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å

## –õ–∏—Ü–µ–Ω–∑–∏—è

[–£–∫–∞–∑–∞—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é]

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **GitHub Issues**: –¥–ª—è –±–∞–≥–æ–≤ –∏ feature requests
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
- **–°—Ç–∞—Ç—É—Å**: –≤ README.md
