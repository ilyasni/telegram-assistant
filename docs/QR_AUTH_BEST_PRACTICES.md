# Best Practices –¥–ª—è QR-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Telegram

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–ë–æ—Ç –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç Telegram —á–µ—Ä–µ–∑ QR-–∫–æ–¥, –∏—Å–ø–æ–ª—å–∑—É—è Telethon. –î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–Ω–∞–ª–∏–∑ Best Practices –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ Telegram (TDLib, Telethon) –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø—Ä–æ–µ–∫—Ç–∞.

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏ Best Practices

### 1. TDLib (Telegram Database Library)
- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Telegram –∫–ª–∏–µ–Ω—Ç–æ–≤
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://core.telegram.org/tdlib
- **–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏**: 
  - `requestQrCodeAuthentication()` - –∑–∞–ø—Ä–æ—Å QR-–∫–æ–¥–∞
  - `confirmQrCodeAuthentication()` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ QR-–∫–æ–¥–∞
  - `authorizationStateWaitOtherDeviceConfirmation` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

### 2. Telethon
- **Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram API
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://docs.telethon.dev/
- **–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏**:
  - `client.qr_login()` - QR-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
  - `StringSession` - –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π
  - `SQLiteSession` - –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π

### 3. –û–±—â–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ QR-–∫–æ–¥—ã —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è (TTL)
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Å–µ—Å—Å–∏–∏
- Rate limiting –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞: –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è vs Best Practices

| –ü—Ä–∞–∫—Ç–∏–∫–∞ | TDLib/Telethon Best Practice | –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ |
|----------|------------------------------|-------------------|--------|--------------|
| **TTL –¥–ª—è QR-–∫–æ–¥–æ–≤** | 600 —Å–µ–∫—É–Ω–¥ (10 –º–∏–Ω—É—Ç) | 600-1200 —Å–µ–∫—É–Ω–¥ (10-20 –º–∏–Ω—É—Ç) | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ 600 —Å–µ–∫—É–Ω–¥ |
| **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π** | Fernet (symmetric encryption) | Fernet —á–µ—Ä–µ–∑ `crypto_utils` | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π |
| **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞** | `get_me()` –ø–µ—Ä–µ–¥ –ø—Ä–∏–≤—è–∑–∫–æ–π | `get_me()` + –ø—Ä–æ–≤–µ—Ä–∫–∞ `telegram_user_id` | ‚úÖ –£–ª—É—á—à–µ–Ω–æ | –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practice |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ FloodWait** | –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff | –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff —Å –¥–∂–∏—Ç—Ç–µ—Ä–æ–º | ‚úÖ –£–ª—É—á—à–µ–Ω–æ | –ú–∞–∫—Å–∏–º—É–º 60 —Å–µ–∫—É–Ω–¥ |
| **Rate limiting** | Sliding window —á–µ—Ä–µ–∑ Redis | Redis-based sliding window | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| **Throttling –∑–∞–ø—Ä–æ—Å–æ–≤** | 200-500ms –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ | 200-500ms —Å random jitter | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| **–í–∞–ª–∏–¥–∞—Ü–∏—è —Å–µ—Å—Å–∏–π** | –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `get_me()` | –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö —Å–µ—Å—Å–∏–π (>5 –º–∏–Ω—É—Ç) | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª |
| **–•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π** | PostgreSQL + Redis –∫–µ—à | PostgreSQL (encrypted) + Redis (TTL) | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è S3 backup |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ 2FA** | `SessionPasswordNeededError` | –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ exception | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | –£–ª—É—á—à–∏—Ç—å UX –¥–ª—è 2FA |
| **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–µ—Å—Å–∏–π | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ `telegram_user_id` | ‚úÖ –£–ª—É—á—à–µ–Ω–æ | –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practice |
| **Distributed locks** | Redis locks –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –≥–æ–Ω–æ–∫ | Redis `SET NX` —Å TTL | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | Prometheus –º–µ—Ç—Ä–∏–∫–∏ | Prometheus –º–µ—Ç—Ä–∏–∫–∏ —Å multi-tenant labels | ‚úÖ –£–ª—É—á—à–µ–Ω–æ | –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practice |
| **–û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤** | –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `disconnect()` | `finally` –±–ª–æ–∫ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤** | `asyncio.wait_for()` —Å timeout | Timeout 590 —Å–µ–∫—É–Ω–¥ –¥–ª—è QR | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å TTL |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** | –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (structlog) | ‚úÖ –£–ª—É—á—à–µ–Ω–æ | –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practice |

## –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–∞–∫—Ç–∏–∫

### 1. TTL –¥–ª—è QR-–∫–æ–¥–æ–≤

#### Best Practice (TDLib/Telethon)
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π TTL**: 600 —Å–µ–∫—É–Ω–¥ (10 –º–∏–Ω—É—Ç)
- **–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**: –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ —É–¥–æ–±—Å—Ç–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```python
# telethon-ingest/services/qr_auth.py:713
QR_TTL_SECONDS = int(os.getenv("QR_TTL_SECONDS", "600"))  # 10 –º–∏–Ω—É—Ç

# api/routers/tg_auth.py:414
QR_TTL_SECONDS = int(os.getenv("QR_TTL_SECONDS", "1200"))  # 20 –º–∏–Ω—É—Ç
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ (600 vs 1200 —Å–µ–∫—É–Ω–¥)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: 
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ 600 —Å–µ–∫—É–Ω–¥ –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `QR_TTL_SECONDS=600`

### 2. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π

#### Best Practice (Telethon)
- **–ú–µ—Ç–æ–¥**: Fernet (symmetric encryption)
- **–•—Ä–∞–Ω–µ–Ω–∏–µ**: –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –≤ –ë–î, —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```python
# telethon-ingest/crypto_utils.py:23-32
def encrypt_session(session_string: str) -> str:
    key = get_encryption_key()
    cipher = Fernet(key)
    encrypted = cipher.encrypt(session_string.encode())
    return encrypted.decode()
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practice

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–æ—Ç–∞—Ü–∏—é –∫–ª—é—á–µ–π —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π (key_id)
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ KMS –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª—é—á–∞–º–∏

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Å–µ—Å—Å–∏–∏

#### Best Practice (TDLib/Telethon)
- **–ú–µ—Ç–æ–¥**: `get_me()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- **–ü—Ä–æ–≤–µ—Ä–∫–∞**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ `telegram_user_id` –ø–µ—Ä–µ–¥ –ø—Ä–∏–≤—è–∑–∫–æ–π —Å–µ—Å—Å–∏–∏

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```python
# telethon-ingest/services/qr_auth.py:746-813
me = await client.get_me()
expected_telegram_id = self.redis_client.hget(redis_key, "telegram_user_id")
if me.id != expected_telegram_id:
    # Ownership mismatch - reject
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –£–ª—É—á—à–µ–Ω–æ (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `telegram_user_id`)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å `telegram_user_id` –≤ Redis –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ QR-—Å–µ—Å—Å–∏–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å–ª—É—á–∞–∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¥–ª—è –∞—É–¥–∏—Ç–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ FloodWait

#### Best Practice (Telethon)
- **–ú–µ—Ç–æ–¥**: –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff —Å –¥–∂–∏—Ç—Ç–µ—Ä–æ–º
- **–ú–∞–∫—Å–∏–º—É–º**: 60 —Å–µ–∫—É–Ω–¥ –æ–∂–∏–¥–∞–Ω–∏—è

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```python
# telethon-ingest/services/qr_auth.py:915-946
max_wait = min(e.seconds, 60)
base_delay = min(max_wait, 2 ** min(e.seconds // 10, 6))
jitter = random.uniform(0.1, 0.3) * base_delay
delay = base_delay + jitter
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practice

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É FloodWait —á–µ—Ä–µ–∑ `FloodWaitManager`
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —á–∞—Å—Ç–æ—Ç—ã FloodWait

### 5. Rate Limiting

#### Best Practice (Telethon/–û–±—â–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏)
- **–ú–µ—Ç–æ–¥**: Redis-based sliding window
- **–õ–∏–º–∏—Ç—ã**: –†–∞–∑–Ω—ã–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö endpoints

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```python
# api/routers/tg_auth.py:238-263
async def ratelimit(key: str, max_per_minute: int = 30) -> bool:
    bucket = f"rl:{key}:{int(time.time() // 60)}"
    v = await redis_client.incr(bucket)
    if v == 1:
        await redis_client.expire(bucket, 120)
    return v <= max_per_minute

async def ratelimit_strict(key: str, max_per_minute: int = 5) -> bool:
    # –°—Ç—Ä–æ–≥–∏–π –ª–∏–º–∏—Ç –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö endpoints
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practice

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Lua-—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ (–∫–∞–∫ –≤ `RateLimiter`)
- –î–æ–±–∞–≤–∏—Ç—å per-tenant rate limiting

### 6. Throttling –∑–∞–ø—Ä–æ—Å–æ–≤

#### Best Practice (Telethon)
- **–ú–µ—Ç–æ–¥**: –°–ª—É—á–∞–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ 200-500ms –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- **–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥–µ—Ç–µ–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```python
# telethon-ingest/services/qr_auth.py:698-704
delay = random.uniform(0.2, 0.5)  # 200-500ms
THROTTLING_DELAY.observe(delay)
await asyncio.sleep(delay)
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practice

### 7. –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–µ—Å—Å–∏–π

#### Best Practice (TDLib/Telethon)
- **–ú–µ—Ç–æ–¥**: –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `get_me()`
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–æ–±—ã—á–Ω–æ 5-15 –º–∏–Ω—É—Ç)

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```python
# telethon-ingest/services/qr_auth.py:192-221
if status == "authorized":
    created_at = data.get("created_at")
    if created_at:
        created_timestamp = int(created_at)
        current_timestamp = int(time.time())
        if current_timestamp - created_timestamp > 300:  # 5 –º–∏–Ω—É—Ç
            await self._validate_authorized_session(key, tenant_id)
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practice

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–æ 15 –º–∏–Ω—É—Ç –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏
- –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π

### 8. –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π

#### Best Practice (Telethon)
- **–ú–µ—Ç–æ–¥**: PostgreSQL –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏, Redis –¥–ª—è –∫–µ—à–∞
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```python
# api/models/database.py:446-463
class TelegramSessionV2(Base):
    session_string_enc = Column(Text, nullable=False)  # –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è
    s3_key = Column(String(512), nullable=True)  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: S3 backup
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practice

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup –≤ S3 –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ—Å—Å–∏–π
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É —Ä–æ—Ç–∞—Ü–∏–∏ —Å—Ç–∞—Ä—ã—Ö —Å–µ—Å—Å–∏–π

### 9. –û–±—Ä–∞–±–æ—Ç–∫–∞ 2FA

#### Best Practice (Telethon)
- **–ú–µ—Ç–æ–¥**: –û–±—Ä–∞–±–æ—Ç–∫–∞ `SessionPasswordNeededError`
- **UX**: –ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ 2FA

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```python
# telethon-ingest/services/qr_auth.py:736-744
except SessionPasswordNeededError:
    self.redis_client.hset(redis_key, mapping={
        "status": "failed", 
        "reason": "password_required"
    })
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practice

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤–≤–æ–¥–∞ 2FA –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ Mini App
- –£–ª—É—á—à–∏—Ç—å UX: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–æ—Ä–º—É –¥–ª—è –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è –≤–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏

### 10. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

#### Best Practice (TDLib/Telethon)
- **–ú–µ—Ç–æ–¥**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–π
- **–ö–ª—é—á**: `telegram_user_id` –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```python
# telethon-ingest/services/qr_auth.py:114-167
if telegram_user_id:
    existing_session = await self._check_existing_session(tenant_id, telegram_user_id)
    if existing_session:
        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–µ—Å—Å–∏—é
        return
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –£–ª—É—á—à–µ–Ω–æ (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ `telegram_user_id`)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–ª—É—á–∞–µ–≤ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Å—Å–∏–π
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é —Å—Ç–∞—Ä—ã—Ö —Å–µ—Å—Å–∏–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π

### 11. Distributed Locks

#### Best Practice (–û–±—â–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏)
- **–ú–µ—Ç–æ–¥**: Redis `SET NX` —Å TTL –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –≥–æ–Ω–æ–∫
- **TTL**: –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ (–æ–±—ã—á–Ω–æ 600 —Å–µ–∫—É–Ω–¥)

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```python
# telethon-ingest/services/qr_auth.py:237-241
lock_key = self._get_lock_key(tenant_id)
got_lock = self.redis_client.set(lock_key, "1", nx=True, ex=600)
if not got_lock:
    continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –µ—Å–ª–∏ lock –∑–∞–Ω—è—Ç
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practice

### 12. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

#### Best Practice (Prometheus/–û–±—â–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏)
- **–ú–µ—Ç–æ–¥**: Prometheus –º–µ—Ç—Ä–∏–∫–∏ —Å labels –¥–ª—è multi-tenancy
- **–ú–µ—Ç—Ä–∏–∫–∏**: Counters, Histograms, Gauges

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```python
# telethon-ingest/services/qr_auth.py:24-56
AUTH_QR_PUBLISHED = Counter("auth_qr_published_total", "QR URL published", ["tenant_id"], namespace="telethon")
AUTH_QR_EXPIRED = Counter("auth_qr_expired_total", "QR session expired", ["tenant_id"], namespace="telethon")
AUTH_QR_SUCCESS = Counter("auth_qr_success_total", "QR session authorized", ["tenant_id"], namespace="telethon")
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –£–ª—É—á—à–µ–Ω–æ (–¥–æ–±–∞–≤–ª–µ–Ω—ã multi-tenant labels)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –î–æ–±–∞–≤–∏—Ç—å SLO –º–µ—Ç—Ä–∏–∫–∏ (availability, latency)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

### 13. –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

#### Best Practice (Telethon)
- **–ú–µ—Ç–æ–¥**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `disconnect()` –≤ `finally` –±–ª–æ–∫–µ
- **–ü—Ä–æ–≤–µ—Ä–∫–∞**: `is_connected()` –ø–µ—Ä–µ–¥ disconnect

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```python
# telethon-ingest/services/qr_auth.py:951-973
finally:
    try:
        if client.is_connected():
            await client.disconnect()
    except Exception as e:
        logger.warning("Error during client disconnect", error=str(e))
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practice

### 14. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤

#### Best Practice (Telethon)
- **–ú–µ—Ç–æ–¥**: `asyncio.wait_for()` —Å timeout
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: Timeout –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–µ–Ω—å—à–µ TTL QR-–∫–æ–¥–∞

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```python
# telethon-ingest/services/qr_auth.py:728-735
try:
    await asyncio.wait_for(qr_login.wait(), timeout=590)
except asyncio.TimeoutError:
    self.redis_client.hset(redis_key, "status", "expired")
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practice

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å timeout (590s) —Å TTL (600s) –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç–∞–π–º–∞—É—Ç–æ–≤

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (P0)

1. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è TTL**
   - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `QR_TTL_SECONDS=600` –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å timeout —Å TTL

2. **–†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è**
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π
   - –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Ä–æ—Ç–∞—Ü–∏—é —Å—Ç–∞—Ä—ã—Ö –∫–ª—é—á–µ–π

3. **–£–ª—É—á—à–µ–Ω–∏–µ UX –¥–ª—è 2FA**
   - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤–≤–æ–¥–∞ 2FA –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ Mini App
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–æ—Ä–º—É –≤–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏

### –í–∞–∂–Ω—ã–µ (P1)

4. **S3 Backup –¥–ª—è —Å–µ—Å—Å–∏–π**
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ—Å—Å–∏–π
   - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ backup

5. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**
   - –£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–æ 15 –º–∏–Ω—É—Ç
   - –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏

6. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è FloodWait**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `FloodWaitManager` –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ (P2)

7. **KMS –¥–ª—è –∫–ª—é—á–µ–π**
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å KMS –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª—é—á–∞–º–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
   - –î–æ–±–∞–≤–∏—Ç—å –∞—É–¥–∏—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–ª—é—á–∞–º

8. **SLO –º–µ—Ç—Ä–∏–∫–∏**
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ availability –∏ latency
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –Ω–∞ SLO –Ω–∞—Ä—É—à–µ–Ω–∏—è

9. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–µ—Å—Å–∏–π**
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é —Å—Ç–∞—Ä—ã—Ö —Å–µ—Å—Å–∏–π
   - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É —Ä–æ—Ç–∞—Ü–∏–∏ —Å–µ—Å—Å–∏–π

## –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

```prometheus
# –£—Å–ø–µ—à–Ω–æ—Å—Ç—å QR-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
rate(auth_qr_success_total[5m]) / rate(auth_qr_start_total[5m])

# –ß–∞—Å—Ç–æ—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è QR-–∫–æ–¥–æ–≤
rate(auth_qr_expired_total[5m]) / rate(auth_qr_published_total[5m])

# –ß–∞—Å—Ç–æ—Ç–∞ FloodWait
rate(telethon_floodwait_total[5m]) / rate(telethon_requests_total[5m])

# –í—Ä–µ–º—è –æ—á–∏—Å—Ç–∫–∏ —Å–µ—Å—Å–∏–π
histogram_quantile(0.95, telethon_session_cleanup_duration_seconds)
```

### SLO —Ü–µ–ª–∏

- **Availability**: 99.9% —É—Å–ø–µ—à–Ω—ã—Ö QR-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–π
- **Latency**: P95 < 3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å–µ—Å—Å–∏–π
- **Error Rate**: < 5% FloodWait –æ—à–∏–±–æ–∫
- **Timeout Rate**: < 10% –∏—Å—Ç–µ—á–µ–Ω–∏–π QR-–∫–æ–¥–æ–≤

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è QR-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ **–≤ —Ü–µ–ª–æ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Best Practices** –∏–∑ TDLib –∏ Telethon. –û—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. ‚úÖ **–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**: –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞, FloodWait handling, rate limiting, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
2. ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è TTL, —Ä–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π, UX –¥–ª—è 2FA
3. üìã **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**: S3 backup, KMS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, SLO –º–µ—Ç—Ä–∏–∫–∏

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è QR-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Telegram.

