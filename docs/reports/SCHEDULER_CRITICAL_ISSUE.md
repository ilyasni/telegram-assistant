# Критическая проблема: Scheduler заблокирован

## Статус

### ✅ Scheduler запущен
- **Контейнер**: `healthy`, работает
- **Режим**: Активный парсинг (incremental parsing enabled)
- **Интервал**: 5 минут
- **Тики**: Выполняются каждые 5 минут

### ❌ Парсинг заблокирован
- **Последний парсинг**: 2025-10-27 18:58:13 (15+ часов назад)
- **Причина**: Ошибки `fromisoformat: argument must be str` блокируют обработку всех каналов
- **Статус**: Парсинг НЕ происходит, новые посты НЕ появляются

## Проблема

На каждом тике (каждые 5 минут) возникают ошибки:
```
Failed to monitor channel <id>: fromisoformat: argument must be str
```

Ошибка происходит для всех 10 каналов, что блокирует:
1. Определение режима парсинга (`_decide_mode`)
2. Запуск парсера (`_parse_channel_with_retry`)
3. Обновление `last_parsed_at`

## Исправления (применены, но не решают проблему)

1. ✅ Исправлен импорт Redis (async → sync)
2. ✅ Добавлена защита типов в `_decide_mode()` для `last_parsed_at`
3. ✅ Добавлена защита типов в обработке HWM
4. ✅ Используется явное создание синхронного Redis клиента из `redis.client.Redis`
5. ⚠️ Ошибка всё ещё возникает (RuntimeWarning: coroutine 'Redis.execute_command' was never awaited)

## Диагностика

Проблема может быть в том, что:
1. Redis клиент всё ещё создаётся как async, несмотря на исправления
2. Ошибка `fromisoformat` происходит не там, где мы думаем

## Рекомендации

1. **СРОЧНО**: Нужен полный traceback ошибки для точной локализации
2. Проверить логи с `traceback_preview` после следующего тика
3. Возможно, нужно временно отключить обработку некоторых каналов для восстановления парсинга

## Влияние

- **Парсинг**: Заблокирован на 15+ часов
- **Новые посты**: Не появляются
- **Последний пост в БД**: 54 минуты назад (но это может быть старый пост)

