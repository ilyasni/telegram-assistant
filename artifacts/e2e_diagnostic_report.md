# üìä –ü–û–õ–ù–´–ô –û–¢–ß–ï–¢ E2E –ü–†–û–í–ï–†–ö–ò –ü–ê–ô–ü–õ–ê–ô–ù–ê

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏**: 2025-10-31 20:10 UTC  
**–†–µ–∂–∏–º**: e2e (–ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)

---

## ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û

### 1. Redis Streams
- ‚úÖ stream:posts:parsed: 2928 —Å–æ–æ–±—â–µ–Ω–∏–π, pending: 0
- ‚úÖ stream:posts:tagged: 1603 —Å–æ–æ–±—â–µ–Ω–∏–π, pending: 0  
- ‚úÖ stream:posts:enriched: 3202 —Å–æ–æ–±—â–µ–Ω–∏–π, pending: 0
- ‚úÖ stream:posts:indexed: 430 —Å–æ–æ–±—â–µ–Ω–∏–π, pending: 0
- ‚úÖ Consumer groups —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ù–µ—Ç –ª–∞–≥–æ–≤ –∏ pending —Å–æ–æ–±—â–µ–Ω–∏–π

### 2. –¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ 413 –ø–æ—Å—Ç–æ–≤ —Å —Ç–µ–≥–∞–º–∏ –≤ –ë–î
- ‚úÖ –°–æ–±—ã—Ç–∏—è posts.tagged –ø—É–±–ª–∏–∫—É—é—Ç—Å—è
- ‚úÖ PostPersistenceTask —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–≥–∏ –≤ post_enrichment

### 3. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è  
- ‚úÖ Qdrant: 212 –≤–µ–∫—Ç–æ—Ä–æ–≤, —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å 2560, payload coverage: 100%
- ‚úÖ Neo4j: 201 –ø–æ—Å—Ç, —Å–≤—è–∑–∏ OWNS=225, HAS_POST=201
- ‚úÖ –û–±–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

### 4. Scheduler
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç, –ø–∞—Ä—Å–∏—Ç –∫–∞–Ω–∞–ª—ã –∫–∞–∂–¥—ã–µ ~5 –º–∏–Ω—É—Ç
- ‚úÖ Lock –º–µ—Ö–∞–Ω–∏–∑–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚úÖ –í—Å–µ –∫–∞–Ω–∞–ª—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

---

## ‚ö†Ô∏è –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. ‚ùå 230 –ü–û–°–¢–û–í –ù–ï –û–ë–†–ê–ë–û–¢–ê–ù–´ (49.5%)

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –í—Å–µ–≥–æ –ø–æ—Å—Ç–æ–≤: 465
- –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 235 (50.5%)
- –ù–ï –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 230 (49.5%)
- –ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24—á: 97 –ø–æ—Å—Ç–æ–≤, –∏–∑ –Ω–∏—Ö 9 –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø–æ—Å—Ç—ã:**
- –ü–æ—Å—Ç `0e522717-168a-45b5-a366-e4fd08576565`:
  - ‚úÖ –°–æ–±—ã—Ç–∏–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –≤ stream:posts:parsed
  - ‚úÖ –ü—Ä–æ—à–µ–ª —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å—Ç—å post_enrichment —Å tags={})
  - ‚úÖ –°–æ–±—ã—Ç–∏–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –≤ stream:posts:enriched
  - ‚ùå is_processed = false
  - ‚ùå –ù–ï –≤ Qdrant
  - ‚ùå –ù–ï –≤ Neo4j

**–í—ã–≤–æ–¥**: –ü–æ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ, –Ω–æ **–Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é**.

### 2. ‚ö†Ô∏è SCHEDULER –ü–ê–†–°–ò–¢ 0 –ù–û–í–´–• –°–û–û–ë–©–ï–ù–ò–ô

**–ü—Ä–∏—á–∏–Ω–∞**: –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram —Å—Ç–∞—Ä–µ–µ `last_parsed_at`

**–õ–æ–≥–∏**:
```
Parsed 0 messages since 2025-10-31 16:59:56.011183+00:00
Reached since_date in incremental mode, stopping
```

**–í—ã–≤–æ–¥**: –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –≤ –∫–∞–Ω–∞–ª–∞—Ö –Ω–µ—Ç –Ω–æ–≤—ã—Ö –ø–æ—Å—Ç–æ–≤. –ù–æ –ø–æ—Å—Ç—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –ë–î —á–µ—Ä–µ–∑ –¥—Ä—É–≥–æ–π –º–µ—Ö–∞–Ω–∏–∑–º (`run_ingest_loop`).

---

## üîç –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê

### –ü–∞–π–ø–ª–∞–π–Ω –¥–ª—è –ø–æ—Å—Ç–∞ `0e522717-168a-45b5-a366-e4fd08576565`:

1. ‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥**: –°–æ–±—ã—Ç–∏–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –≤ stream:posts:parsed
2. ‚úÖ **–¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ—à–µ–ª, tags={} (–ø—É—Å—Ç—ã–µ, –Ω–æ –∑–∞–ø–∏—Å—å –µ—Å—Ç—å)
3. ‚úÖ **–û–±–æ–≥–∞—â–µ–Ω–∏–µ**: –°–æ–±—ã—Ç–∏–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –≤ stream:posts:enriched
4. ‚ùå **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è**: –ù–ï –ø—Ä–æ—à–ª–∞ (–Ω–µ—Ç –≤ Qdrant –∏ Neo4j)
5. ‚ùå **is_processed**: –û—Å—Ç–∞–ª—Å—è false (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏)

**–ü—Ä–æ–±–ª–µ–º–∞**: IndexingTask –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∏–∑ stream:posts:enriched –∏–ª–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π.

---

## üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ IndexingTask**:
   ```bash
   docker compose logs worker | grep -E "indexing|0e522717|error|failed"
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ª–∏ —Å–æ–±—ã—Ç–∏–µ**:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á–∏—Ç–∞–µ—Ç –ª–∏ IndexingTask –∏–∑ stream:posts:enriched
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ

3. **–†–µ—Ç—Ä–∞–π –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤**:
   - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Å—Ç–æ–≤ –∏–∑ stream:posts:enriched
   - –ò–ª–∏ —Ä–µ—Ç—Ä–∞–π –ø–æ—Å—Ç–æ–≤ —Å is_processed=false

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ is_processed**:
   - –î–æ–±–∞–≤–∏—Ç—å –∞–ª–µ—Ä—Ç, –µ—Å–ª–∏ –¥–æ–ª—è –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ > 10%
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫—É –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–æ is_processed=true

2. **–£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫**:
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
   - –î–æ–±–∞–≤–∏—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è failed –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è is_processed**:
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ is_processed –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
   - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ is_processed –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ (—Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ/–æ–±–æ–≥–∞—â–µ–Ω–∏–µ/–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è)

---

## üìä –ú–ï–¢–†–ò–ö–ò –ü–ê–ô–ü–õ–ê–ô–ù–ê

| –≠—Ç–∞–ø | –°—Ç–∞—Ç—É—Å | –ú–µ—Ç—Ä–∏–∫–∞ |
|------|--------|---------|
| –ü–∞—Ä—Å–∏–Ω–≥ | ‚úÖ | 2928 —Å–æ–±—ã—Ç–∏–π –≤ stream |
| –¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ | 413 –ø–æ—Å—Ç–æ–≤ —Å —Ç–µ–≥–∞–º–∏ |
| –û–±–æ–≥–∞—â–µ–Ω–∏–µ | ‚ö†Ô∏è | 0 –ø–æ—Å—Ç–æ–≤ —Å –æ–±–æ–≥–∞—â–µ–Ω–∏–µ–º (Crawl4AI) |
| –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è | ‚ùå | 212 –≤–µ–∫—Ç–æ—Ä–æ–≤, –Ω–æ 230 –ø–æ—Å—Ç–æ–≤ –Ω–µ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã |
| is_processed | ‚ùå | 230 –ø–æ—Å—Ç–æ–≤ —Å is_processed=false |

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ò E2E

- ‚úÖ streams.stream:posts:parsed.pending: 0
- ‚úÖ streams.stream:posts:tagged.pending: 0
- ‚úÖ streams.stream:posts:enriched.pending: 0
- ‚úÖ streams.stream:posts:indexed.pending: 0
- ‚úÖ parsing.posts_last24h: 97 > threshold
- ‚úÖ qdrant.telegram_posts.payload_coverage: 100%
- ‚ùå pipeline.flow_complete: FAILED (–ø–æ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –≤–æ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö)

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 6/7 –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä–æ–π–¥–µ–Ω–æ
